<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Include fragment content inside head -->
    <div th:replace="~{fragments/bundles/header :: head-page-2}"></div>

    <title>.</title>

    <!-- Microsoft Clarity -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "qtfyso1mfx");
    </script>

    <!-- Google Analytics (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FDJL41MRCT"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FDJL41MRCT');
    </script>
</head>
<body>

<div class="sidebar">

    <!-- Logo at the top -->
    <div class="logo"><img src="/images/assets/logo-white.svg" alt="logo"></div>

    <!-- Image centered vertically -->
    <div class="centered"><img src="/images/assets/hand-card-tap.svg" alt="tap"></div>

    <!-- Text at the bottom -->
    <div class="bottom-text">
        <a href="https://tiptappay.com/connect-with-us/" class="text-white">Need Help?</a>
    </div>

</div>

<div class="content">

    <div class="text-center mb-4">
        <div style="font-weight: bold; font-size: 36px; padding-top: 70px; padding-bottom: 10px;">Verify your email</div>
    </div>

    <div class="mb-4">

        <div class="form-content text-center">

            <div class="">
                <div class="mb-3">You’ve successfully created your password—just one last step to access your account!</div>
                <div class="mb-3">We’ve sent a confirmation email to <span style="font-weight: bold" th:text="${email}"></span>. Click
                    the link in the email to verify your email address and complete your setup.
                </div>
                <div class="mb-3">If you don’t see the email, please check your spam folder.</div>
                <div class="mb-3">

                    <div class="d-flex justify-content-center">
                        <span>Still no email? </span>

                        <!-- Resend Button -->
                        <form id="resend-form" action="/benevity/education/my-account-setup/resend-email" method="POST" style="display: none;">
                            <button type="submit" style="color: #9d2285; border: none; background-color: transparent; font-weight: bold;">
                                Resend Email
                            </button>
                        </form>

                        <!-- Countdown Timer -> min:sec -->
                        <div id="countdown-container" style="display: none; color: #9d2285; font-weight: bold">
                            &nbsp;Please wait <span id="countdown" class="mb-3" th:data-future-time="${futureEpochTime}"></span> minutes before requesting another.
                        </div>
                    </div>


                </div>

            </div>

        </div>
    </div>

</div>

<script th:src="@{/js/common/email.js}"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const countdownElement = document.getElementById("countdown");
        const countdownContainer = document.getElementById("countdown-container");
        const resendForm = document.getElementById("resend-form");
        const futureEpochTime = parseInt(countdownElement.getAttribute("data-future-time"), 10); // epoch in milliseconds

        function updateCountdown() {
            const now = Date.now();
            let remainingTime = Math.floor((futureEpochTime - now) / 1000); // convert to seconds

            if (remainingTime <= 0) {
                countdownContainer.style.display = "none";
                resendForm.style.display = "block";
                return;
            }

            const minutes = Math.floor(remainingTime / 60);
            const seconds = remainingTime % 60;
            countdownElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

            countdownContainer.style.display = "block";
            resendForm.style.display = "none";

            setTimeout(updateCountdown, 1000); // update every second
        }

        updateCountdown(); // start countdown logic
    });
</script>


</body>
</html>
