<!DOCTYPE html>
<html
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org"
        lang="en"
>

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.14.2/dist/bootstrap-table.min.css">
    <link rel="icon" type="image/x" href="/favicon.ico">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <title>tiptap</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/app.css"/>

    <meta charset="UTF-8" content="MBoyQBsQODEBNHceP31SFiBYDEkgOgcdGyaryiAu6VAXi5kLp3yxUXKn" csrf-param="_csrf_token"
          method-param="_method" name="csrf-token">

    <style>
        .hidden {
            display: none;
        }

        .card {
            height: 100% !important;
        }

        .ttp-section-title-primary {
            background-color: #9E017D;
            border-radius: 8px;
            padding: 10px;
            color: #FFFFFF;
            font-weight: 600;
        }
    </style>
</head>

<body style="background-color: #fcfcfc">

<div id="content-wrapper" class="">

    <nav th:replace="~{fragments/navbar :: navbar}"></nav>

    <div class="container d-flex mt-5">

        <main
                id=""
                class="bg-lightgrey flex-grow-6 flex-shrink-1 px-4 py-5 w-100"
                role="main"
        >

            <form method="POST" th:object="${checkoutForm}" id="order-form">

                <div class="d-flex justify-content-between align-items-center mt-3 mb-3">


                    <div class="d-flex justify-content-between align-items-center">

                        <a class="btn btn-outline-primary btn-small position-relative d-flex align-items-center"
                           href="/store/checkout">
                            <svg th:replace="~{fragments/svg_fragments :: svg-left-arrow}"></svg>
                        </a>

                        <a class="btn btn-outline-primary btn-small position-relative d-flex align-items-center ml-2"
                           href="/store">
                            <svg th:replace="~{fragments/svg_fragments :: svg-store-home}"></svg>
                        </a>

                    </div>

                    <button class="btn btn-outline-primary btn-small position-relative d-flex align-items-center" type="submit">
                        <svg th:replace="~{fragments/svg_fragments :: svg-right-arrow}"></svg>
                    </button>

                </div>

                <section class="mb-3">
                    <div class="mb-4">
                        <header>
                            <h1>Summary</h1>
                        </header>

                        <p class="">
                            Please review your information and the order summary. To complete your order, click the
                            "Complete Order" button.
                        </p>
                    </div>
                </section>



                    <span th:if="${invalidForm}" th:text="${invalidForm}" style="color: red;"></span>

                    <div class="row justify-content-between">

                        <div class="col-sm">

                            <div class="row">

                                <div class="col-sm">

                                    <div class="ttp-section-title-primary">
                                        <span>Contact Information</span>
                                    </div>
                                    <hr class="mb-3">
                                    <div>
                                        <span th:text="${form.getContactFirstName() + ' ' + form.getContactLastName()}"></span>
                                    </div>
                                    <div>
                                        <span th:text="${form.getContactPhoneCountryCode() + ' ' + form.getContactPhone()}"></span>
                                    </div>
                                    <div>
                                        <span th:text="${form.getContactEmail()}"></span>
                                    </div>

                                </div>

                                <div class="col-sm">

                                    <div class="ttp-section-title-primary">
                                        <span>Shipping Information</span>
                                    </div>
                                    <hr class="mb-3">
                                    <div>
                                        <span th:text="${form.getShippingAddr1() + ' ' + form.getShippingAddr2()}"></span>
                                    </div>
                                    <div>
                                        <span th:text="${form.getShippingCity() + ', ' + form.getShippingStateCA() + ', ' + form.getShippingPostalCode()}"></span>
                                    </div>
                                    <div>
                                        <span th:text="${form.getShippingPhoneCountryCode() + ' ' + form.getShippingPhone()}"></span>
                                    </div>
                                    <div>
                                        <span th:text="${form.getShippingEmail()}"></span>
                                    </div>

                                </div>

                            </div>

                            <div class="ttp-section-title-primary mt-5">
                                <span>Notes /Details</span>
                            </div>
                            <hr class="mb-3">
                            <div>
                                <span th:text="${form.getMemo()}"></span>
                            </div>

                            <div id="billing-information-section" class="mb-5">
                                <div class="ttp-section-title-primary mt-5">
                                    <span>Billing Information</span>
                                </div>
                                <hr class="mb-3">

                                <div class="row g-3">

                                    <div class="col-12 col-md-6 mt-3">
                                        <label for="billingFirstName" class="form-label ">First Name</label>
                                        <input type="text" class="form-control form-item" id="billingFirstName"
                                               name="billingFirstName"
                                               maxlength="100"
                                               th:value="${checkoutForm.getBillingFirstName()}"
                                               th:field="*{billingFirstName}"
                                               required
                                        >
                                        <span th:if="${#fields.hasErrors('billingFirstName')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{billingFirstName}"></span>
                                        </span>
                                    </div>

                                    <div class="col-12 col-md-6 mt-3">
                                        <label for="billingLastName" class="form-label ">Last Name</label>
                                        <input type="text" class="form-control form-item" id="billingLastName"
                                               name="billingLastName"
                                               maxlength="100"
                                               th:value="${checkoutForm.getBillingLastName()}"
                                               th:field="*{billingLastName}"
                                               required
                                        >
                                        <span th:if="${#fields.hasErrors('billingLastName')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{billingLastName}"></span>
                                        </span>
                                    </div>

                                    <div class="col-12 mt-3">
                                        <label for="billingAddr1" class="form-label ">Address Line 1</label>
                                        <small class="mb-2">
                                            <br>Please note: the use of "PO Box" is not allowed.
                                        </small>
                                        <input type="text" class="form-control form-item" id="billingAddr1"
                                               name="billingAddr1"
                                               maxlength="200"
                                               th:value="${checkoutForm.getBillingAddr1()}"
                                               th:field="*{billingAddr1}"
                                               required
                                        >
                                        <span th:if="${#fields.hasErrors('billingAddr1')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{billingAddr1}"></span>
                                        </span>
                                    </div>

                                    <div class="col-12 mt-3">
                                        <label for="billingAddr2" class="form-label">Address Line 2</label>
                                        <input type="text" class="form-control form-item" id="billingAddr2"
                                               name="billingAddr2"
                                               maxlength="200"
                                               th:value="${checkoutForm.getBillingAddr2()}"
                                               th:field="*{billingAddr2}"
                                        >
                                        <span th:if="${#fields.hasErrors('billingAddr2')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{billingAddr2}"></span>
                                        </span>
                                    </div>

                                    <div class="col-12 col-md-6 mt-3">
                                        <label for="billingCountry" class="form-label ">Country</label>
                                        <select class="custom-select form-item bg-white" id="billingCountry"
                                                name="billingCountry"
                                                th:value="${checkoutForm.getBillingCountry()}"
                                                th:field="*{billingCountry}"
                                                required
                                        >
                                            <option value="Canada">Canada</option>
                                            <option value="US">US</option>
                                        </select>
                                        <span th:if="${#fields.hasErrors('billingCountry')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{billingCountry}"></span>
                                        </span>
                                    </div>

                                    <div class="col-12 col-md-6 mt-3" id="billing-state-ca-field">
                                        <label for="billingStateCA" class="form-label ">State/Province/Region</label>
                                        <select class="custom-select form-item bg-white" id="billingStateCA"
                                                name="billingStateCA"
                                                th:value="${checkoutForm.getBillingStateCA()}"
                                                th:field="*{billingStateCA}"
                                                required
                                        >
                                            <option value="Alberta">Alberta</option>
                                            <option value="British Columbia">British Columbia</option>
                                            <option value="Manitoba">Manitoba</option>
                                            <option value="New Brunswick">New Brunswick</option>
                                            <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                                            <option value="Nova Scotia">Nova Scotia</option>
                                            <option value="Northwest Territories">Northwest Territories</option>
                                            <option value="Nunavut">Nunavut</option>
                                            <option value="Ontario">Ontario</option>
                                            <option value="Prince Edward Island">Prince Edward Island</option>
                                            <option value="Quebec">Quebec</option>
                                            <option value="Saskatchewan">Saskatchewan</option>
                                            <option value="Yukon">Yukon</option>
                                        </select>
                                        <span th:if="${#fields.hasErrors('billingStateCA')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{billingStateCA}"></span>
                                        </span>
                                    </div>

                                    <div class="col-12 col-md-6 mt-3" id="billing-state-us-field">
                                        <label for="billingStateUS" class="form-label ">State/Province/Region</label>
                                        <select class="custom-select form-item bg-white" id="billingStateUS"
                                                name="billingStateUS"
                                                th:value="${checkoutForm.getBillingStateUS()}"
                                                th:field="*{billingStateUS}"
                                                required
                                        >
                                            <option value="Alabama">Alabama</option>
                                            <option value="Alaska">Alaska</option>
                                            <option value="Arizona">Arizona</option>
                                            <option value="Arkansas">Arkansas</option>
                                            <option value="California">California</option>
                                            <option value="Colorado">Colorado</option>
                                            <option value="Connecticut">Connecticut</option>
                                            <option value="Delaware">Delaware</option>
                                            <option value="District Of Columbia">District Of Columbia</option>
                                            <option value="Florida">Florida</option>
                                            <option value="Georgia">Georgia</option>
                                            <option value="Hawaii">Hawaii</option>
                                            <option value="Idaho">Idaho</option>
                                            <option value="Illinois">Illinois</option>
                                            <option value="Indiana">Indiana</option>
                                            <option value="Iowa">Iowa</option>
                                            <option value="Kansas">Kansas</option>
                                            <option value="Kentucky">Kentucky</option>
                                            <option value="Louisiana">Louisiana</option>
                                            <option value="Maine">Maine</option>
                                            <option value="Maryland">Maryland</option>
                                            <option value="Massachusetts">Massachusetts</option>
                                            <option value="Michigan">Michigan</option>
                                            <option value="Minnesota">Minnesota</option>
                                            <option value="Mississippi">Mississippi</option>
                                            <option value="Missouri">Missouri</option>
                                            <option value="Montana">Montana</option>
                                            <option value="Nebraska">Nebraska</option>
                                            <option value="Nevada">Nevada</option>
                                            <option value="New Hampshire">New Hampshire</option>
                                            <option value="New Jersey">New Jersey</option>
                                            <option value="New Mexico">New Mexico</option>
                                            <option value="New York">New York</option>
                                            <option value="North Carolina">North Carolina</option>
                                            <option value="North Dakota">North Dakota</option>
                                            <option value="Ohio">Ohio</option>
                                            <option value="Oklahoma">Oklahoma</option>
                                            <option value="Oregon">Oregon</option>
                                            <option value="Pennsylvania">Pennsylvania</option>
                                            <option value="Rhode Island">Rhode Island</option>
                                            <option value="South Carolina">South Carolina</option>
                                            <option value="South Dakota">South Dakota</option>
                                            <option value="Tennessee">Tennessee</option>
                                            <option value="Texas">Texas</option>
                                            <option value="Utah">Utah</option>
                                            <option value="Vermont">Vermont</option>
                                            <option value="Virginia">Virginia</option>
                                            <option value="Washington">Washington</option>
                                            <option value="West Virginia">West Virginia</option>
                                            <option value="Wisconsin">Wisconsin</option>
                                            <option value="Wyoming">Wyoming</option>
                                        </select>
                                        <span th:if="${#fields.hasErrors('billingStateUS')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{billingStateUS}"></span>
                                        </span>
                                    </div>


                                    <div class="col-12 col-md-6 mt-3">
                                        <label for="billingCity" class="form-label ">City</label>
                                        <input type="text" class="form-control form-item" id="billingCity"
                                               name="billingCity"
                                               maxlength="100"
                                               th:value="${checkoutForm.getBillingCity()}"
                                               th:field="*{billingCity}"
                                               required
                                        >
                                        <span th:if="${#fields.hasErrors('billingCity')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{billingCity}"></span>
                                        </span>
                                    </div>

                                    <div class="col-12 col-md-6 mt-3" id="billing-zip-code-field">
                                        <label for="billingZip" class="form-label ">Zip Code</label>
                                        <input type="text" class="form-control form-item" id="billingZip"
                                               name="billingZip"
                                               maxlength="5"
                                               th:value="${checkoutForm.getBillingZip()}"
                                               th:field="*{billingZip}"
                                               pattern="\d{5}"
                                               title="Please enter a 5-digit ZIP Code"
                                               required
                                        >
                                        <span th:if="${#fields.hasErrors('billingZip')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{billingZip}"></span>
                                        </span>
                                    </div>

                                    <div class="col-12 col-md-6 mt-3" id="billing-postal-code-field">
                                        <label for="billingPostalCode" class="form-label ">Postal Code</label>
                                        <input type="text" class="form-control form-item" id="billingPostalCode"
                                               name="billingPostalCode"
                                               maxlength="7"
                                               th:value="${checkoutForm.getBillingPostalCode()}"
                                               th:field="*{billingPostalCode}"
                                               pattern="[A-Za-z]\d[A-Za-z] \d[A-Za-z]\d"
                                               title="Please enter a postal code in the A1A 1A1 format"
                                               required
                                        >
                                        <span th:if="${#fields.hasErrors('billingPostalCode')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{billingPostalCode}"></span>
                                        </span>
                                    </div>

                                </div>

                            </div>


                            <div id="payment-information-section" class="mb-5">
                                <div class="ttp-section-title-primary mt-5">
                                    <span>Payment Information</span>
                                </div>
                                <hr class="mb-3">

                                <div class="row g-3">

                                    <div class="col-12 col-md-5 mt-3">
                                        <label for="cardNumber" class="form-label ">Card Number</label>
                                        <input type="text" class="form-control form-item" id="cardNumber"
                                               name="cardNumber"
                                               maxlength="16"
                                               th:value="${checkoutForm.getCardNumber()}"
                                               th:field="*{cardNumber}"
                                               pattern="\d{16}"
                                               title="Please enter a 16-digit Card Number"
                                               required
                                        >
                                        <span th:if="${#fields.hasErrors('cardNumber')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{cardNumber}"></span>
                                        </span>
                                    </div>

                                    <div class="col-12 col-md-2 mt-3">
                                        <label for="expirationMonth" class="form-label ">MM</label>
                                        <input type="text" class="form-control form-item" id="expirationMonth"
                                               name="expirationMonth"
                                               maxlength="2"
                                               th:value="${checkoutForm.getExpirationMonth()}"
                                               th:field="*{expirationMonth}"
                                               pattern="\d{2}"
                                               title="Please enter a 2-digit Expiration Month, exp: 01, 05, 11, 12..."
                                               required
                                        >
                                        <span th:if="${#fields.hasErrors('expirationMonth')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{expirationMonth}"></span>
                                        </span>
                                    </div>

                                    <div class="col-12 col-md-2 mt-3">
                                        <label for="expirationYear" class="form-label ">YY</label>
                                        <input type="text" class="form-control form-item" id="expirationYear"
                                               name="expirationYear"
                                               maxlength="2"
                                               th:value="${checkoutForm.getExpirationYear()}"
                                               th:field="*{expirationYear}"
                                               pattern="\d{2}"
                                               title="Please enter a 2-digit Expiration Year, exp: 26, 27, 28..."
                                               required
                                        >
                                        <span th:if="${#fields.hasErrors('expirationYear')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{expirationYear}"></span>
                                        </span>
                                    </div>

                                    <div class="col-12 col-md-3 mt-3">
                                        <label for="cvv" class="form-label ">CVV</label>
                                        <input type="text" class="form-control form-item" id="cvv"
                                               name="cvv"
                                               maxlength="3"
                                               th:value="${checkoutForm.getCvv()}"
                                               th:field="*{cvv}"
                                               pattern="\d{3}"
                                               title="Please enter a 3-digit CVV"
                                               required
                                        >
                                        <span th:if="${#fields.hasErrors('cvv')}" class="text-danger">
                                            <span th:replace="~{/fragments/svg_fragments :: svg-danger}"></span>
                                            <span th:errors="*{cvv}"></span>
                                        </span>
                                    </div>

                                </div>

                            </div>

                        </div>

                        <div class="col-sm card" style="max-width: 320px; min-width: 320px; margin: 0 8px 0 8px">
                            <div class="card-body p-0">

                                <div id="shopping-bag-section" class="bg-white mb-5" style="border-radius: 20px;">

                                    <table th:fragment="store-bag-table"
                                           id="store-bag-table"
                                           class="table table-borderless mt-3"
                                           style="border-radius: 20px">
                                        <tr style="border: none">
                                            <td colspan="3" style="vertical-align: middle"><p
                                                    style="margin-bottom: 0 !important;"
                                                    class="text-black font-weight-bold text-nowrap">Order Summary</p>
                                            </td>
                                        </tr>

                                        <!--   small counter - denomination: $2    -->
                                        <tr style="border: none" id="smallCounter2DollarTr"
                                            th:class="${bag.getSmallCounter2Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/small_counter.png'}"
                                                     alt="small counter image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">small counter</span>
                                                <br>$2<br>quantity: <span
                                                    th:text="${bag.getSmallCounter2Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="smallCounter2DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getSmallCounter2Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   small counter - denomination: $5    -->

                                        <tr style="border: none" id="smallCounter5DollarTr"
                                            th:class="${bag.getSmallCounter5Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/small_counter.png'}"
                                                     alt="small counter image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">small counter</span>
                                                <br>$5<br>quantity: <span
                                                    th:text="${bag.getSmallCounter5Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="smallCounter5DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getSmallCounter5Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   small counter - denomination: $10    -->

                                        <tr style="border: none" id="smallCounter10DollarTr"
                                            th:class="${bag.getSmallCounter10Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/small_counter.png'}"
                                                     alt="small counter image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">small counter</span>
                                                <br>$10<br>quantity: <span
                                                    th:text="${bag.getSmallCounter10Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="smallCounter10DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getSmallCounter10Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   small counter - denomination: $20    -->

                                        <tr style="border: none" id="smallCounter20DollarTr"
                                            th:class="${bag.getSmallCounter20Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/small_counter.png'}"
                                                     alt="small counter image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">small counter</span>
                                                <br>$20<br>quantity: <span
                                                    th:text="${bag.getSmallCounter20Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="smallCounter20DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getSmallCounter20Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   medium counter - denomination: $2    -->
                                        <tr style="border: none" id="mediumCounter2DollarTr"
                                            th:class="${bag.getMediumCounter2Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/medium_counter.png'}"
                                                     alt="medium counter image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">medium counter</span>
                                                <br>$2<br>quantity: <span
                                                    th:text="${bag.getMediumCounter2Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="mediumCounter2DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getMediumCounter2Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   medium counter - denomination: $5    -->
                                        <tr style="border: none" id="mediumCounter5DollarTr"
                                            th:class="${bag.getMediumCounter5Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/medium_counter.png'}"
                                                     alt="medium counter image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">medium counter</span>
                                                <br>$5<br>quantity: <span
                                                    th:text="${bag.getMediumCounter5Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="mediumCounter5DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getMediumCounter5Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   medium counter - denomination: $10    -->
                                        <tr style="border: none" id="mediumCounter10DollarTr"
                                            th:class="${bag.getMediumCounter10Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/medium_counter.png'}"
                                                     alt="medium counter image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">medium counter</span>
                                                <br>$10<br>quantity: <span
                                                    th:text="${bag.getMediumCounter10Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="mediumCounter10DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getMediumCounter10Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   medium counter - denomination: $20    -->
                                        <tr style="border: none" id="mediumCounter20DollarTr"
                                            th:class="${bag.getMediumCounter20Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/medium_counter.png'}"
                                                     alt="medium counter image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">medium counter</span>
                                                <br>$20<br>quantity: <span
                                                    th:text="${bag.getMediumCounter20Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="mediumCounter20DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getMediumCounter20Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   large counter - denomination: $2 $5 $10   -->
                                        <tr style="border: none" id="largeCounter2510DollarTr"
                                            th:class="${bag.getLargeCounter2510Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/large_counter.png'}"
                                                     alt="large counter image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">large counter</span>
                                                <br>$2 $5 $10<br>quantity: <span
                                                    th:text="${bag.getLargeCounter2510Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="largeCounter2510DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getLargeCounter2510Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   large counter - denomination: $5 $10 $20   -->
                                        <tr style="border: none" id="largeCounter51020DollarTr"
                                            th:class="${bag.getLargeCounter51020Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/large_counter.png'}"
                                                     alt="large counter image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">large counter</span>
                                                <br>$5 $10 $20<br>quantity: <span
                                                    th:text="${bag.getLargeCounter51020Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="largeCounter51020DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getLargeCounter51020Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   floor stand - denomination: $2 $5 $10   -->
                                        <tr style="border: none" id="floorStand2510DollarTr"
                                            th:class="${bag.getFloorStand2510Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/floor_stand.png'}"
                                                     alt="floor stand image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">floor stand</span>
                                                <br>$2 $5 $10<br>quantity: <span
                                                    th:text="${bag.getFloorStand2510Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="floorStand2510DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getFloorStand2510Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   floor stand - denomination: $5 $10 $20   -->
                                        <tr style="border: none" id="floorStand51020DollarTr"
                                            th:class="${bag.getFloorStand51020Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/floor_stand.png'}"
                                                     alt="floor stand image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">floor stand</span>
                                                <br>$5 $10 $20<br>quantity: <span
                                                    th:text="${bag.getFloorStand51020Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="floorStand51020DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getFloorStand51020Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   lanyard - denomination: $2    -->
                                        <tr style="border: none" id="lanyard2DollarTr"
                                            th:class="${bag.getLanyard2Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/lanyard.png'}"
                                                     alt="lanyard image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">lanyard</span>
                                                <br>$2<br>quantity: <span th:text="${bag.getLanyard2Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="lanyard2DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getLanyard2Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   lanyard - denomination: $5    -->

                                        <tr style="border: none" id="lanyard5DollarTr"
                                            th:class="${bag.getLanyard5Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/lanyard.png'}"
                                                     alt="lanyard image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">lanyard</span>
                                                <br>$5<br>quantity: <span th:text="${bag.getLanyard5Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="lanyard5DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getLanyard5Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   lanyard - denomination: $10    -->

                                        <tr style="border: none" id="lanyard10DollarTr"
                                            th:class="${bag.getLanyard10Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/lanyard.png'}"
                                                     alt="lanyard image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">lanyard</span>
                                                <br>$10<br>quantity: <span th:text="${bag.getLanyard10Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="lanyard10DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getLanyard10Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   lanyard - denomination: $20    -->

                                        <tr style="border: none" id="lanyard20DollarTr"
                                            th:class="${bag.getLanyard20Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/lanyard.png'}"
                                                     alt="lanyard image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">lanyard</span>
                                                <br>$20<br>quantity: <span th:text="${bag.getLanyard20Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="lanyard20DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getLanyard20Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>


                                        <!--   selfie stick - denomination: $2    -->
                                        <tr style="border: none" id="selfieStick2DollarTr"
                                            th:class="${bag.getSelfieStick2Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/selfie_stick.png'}"
                                                     alt="selfie stick image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">selfie stick</span>
                                                <br>$2<br>quantity: <span
                                                    th:text="${bag.getSelfieStick2Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="selfieStick2DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getSelfieStick2Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   selfie stick - denomination: $5    -->

                                        <tr style="border: none" id="selfieStick5DollarTr"
                                            th:class="${bag.getSelfieStick5Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/selfie_stick.png'}"
                                                     alt="selfie stick image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">selfie stick</span>
                                                <br>$5<br>quantity: <span
                                                    th:text="${bag.getSelfieStick5Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="selfieStick5DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getSelfieStick5Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   selfie stick - denomination: $10    -->

                                        <tr style="border: none" id="selfieStick10DollarTr"
                                            th:class="${bag.getSelfieStick10Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/selfie_stick.png'}"
                                                     alt="selfie stick image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">selfie stick</span>
                                                <br>$10<br>quantity: <span
                                                    th:text="${bag.getSelfieStick10Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="selfieStick10DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getSelfieStick10Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   selfie stick - denomination: $20    -->

                                        <tr style="border: none" id="selfieStick20DollarTr"
                                            th:class="${bag.getSelfieStick20Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/selfie_stick.png'}"
                                                     alt="selfie stick image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">selfie stick</span>
                                                <br>$20<br>quantity: <span
                                                    th:text="${bag.getSelfieStick20Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="selfieStick20DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getSelfieStick20Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   mini clip - denomination: $2    -->
                                        <tr style="border: none" id="miniClip2DollarTr"
                                            th:class="${bag.getMiniClip2Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/mini_clip.png'}"
                                                     alt="mini clip image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">mini clip</span>
                                                <br>$2<br>quantity: <span th:text="${bag.getMiniClip2Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="miniClip2DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getMiniClip2Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   mini clip - denomination: $5    -->

                                        <tr style="border: none" id="miniClip5DollarTr"
                                            th:class="${bag.getMiniClip5Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/mini_clip.png'}"
                                                     alt="mini clip image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">mini clip</span>
                                                <br>$5<br>quantity: <span th:text="${bag.getMiniClip5Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="miniClip5DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getMiniClip5Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   mini clip - denomination: $10    -->

                                        <tr style="border: none" id="miniClip10DollarTr"
                                            th:class="${bag.getMiniClip10Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/mini_clip.png'}"
                                                     alt="mini clip image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">mini clip</span>
                                                <br>$10<br>quantity: <span
                                                    th:text="${bag.getMiniClip10Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="miniClip10DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getMiniClip10Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <!--   mini clip - denomination: $20    -->

                                        <tr style="border: none" id="miniClip20DollarTr"
                                            th:class="${bag.getMiniClip20Dollar() <= 0} ? 'hidden'">
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px">
                                                <img th:src="@{'/images/mini_clip.png'}"
                                                     alt="mini clip image"
                                                     style="width: 50px; margin-bottom: 8px; border: 2px solid transparent; border-radius: 10px;"
                                                >
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap">
                                                <span style="font-weight: bold;">mini clip</span>
                                                <br>$20<br>quantity: <span
                                                    th:text="${bag.getMiniClip20Dollar()}"></span>
                                            </td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal">
                                                $<span id="miniClip20DollarSubtotalText"
                                                       th:text="${formatter.formatCents(bag.getMiniClip20Dollar() * pricing.getMonthlyFeeAmount())}"></span>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td style="vertical-align: middle; padding: 0 20px 0 15px"></td>
                                            <td style="vertical-align: middle; padding-left: 0;"
                                                class="td-small-desc text-nowrap"></td>
                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="td-subtotal"></td>
                                        </tr>

                                        <tr style="border: none">

                                            <td style="" colspan="2">
                                                <span class="text-black font-weight-bold">Subscription Fee</span>
                                            </td>

                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="text-nowrap text-fuscia">
                                            <span>
                                                $<span id="subscriptionFeeText"
                                                       th:text="${formatter.formatCents(subscriptionFee)}"></span>
                                            </span>
                                            </td>

                                        </tr>

                                        <tr style="border: none">

                                            <td style="" colspan="2">
                                                <span class="text-black font-weight-bold">Service Fee</span>
                                            </td>

                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="text-nowrap text-fuscia">
                                            <span>
                                                $<span id="serviceFeeText"
                                                       th:text="${formatter.formatCents(serviceFee)}"></span>
                                            </span>
                                            </td>

                                        </tr>

                                        <tr style="border: none">

                                            <td style="" colspan="2">
                                                <span class="text-black font-weight-bold">Shipping Fee</span>
                                            </td>

                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="text-nowrap text-fuscia">
                                            <span>
                                                $<span id="shippingFeeText"
                                                       th:text="${quoteResp.getShippingAmount()}"></span>
                                            </span>
                                            </td>

                                        </tr>

                                        <tr style="">

                                            <td style="" colspan="2">
                                                <span class="text-black font-weight-bold">Tax</span>
                                            </td>

                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="text-nowrap text-fuscia">
                                            <span>
                                                $<span id="taxFeeText" th:text="${quoteResp.getTaxAmount()}"></span>
                                            </span>
                                            </td>

                                        </tr>

                                        <tr style="border: none">

                                            <td style="" colspan="2">
                                                <p class="text-black font-weight-bold">Total</p>
                                            </td>

                                            <td style="vertical-align: middle; padding-left: 0; padding-right: 0"
                                                class="text-nowrap">
                                                <p class="text-fuscia">
                                                    $<span id="totalAmountText"
                                                           th:text="${formatter.formatCents(totalAmount)}"></span>
                                                </p>
                                            </td>

                                        </tr>

                                        <!--                                        <tr style="border: none">-->
                                        <!--                                            <td colspan="3" class="pb-1">-->
                                        <!--                                                <a class="btn btn-block btn-small btn-secondary" href="/store"-->
                                        <!--                                                   type="button" style="text-transform: none">-->
                                        <!--                                                    <- Continue Shopping-->
                                        <!--                                                </a>-->
                                        <!--                                            </td>-->
                                        <!--                                        </tr>-->
                                        <!--                                        <tr style="border: none">-->
                                        <!--                                            <td colspan="3" class="pb-1">-->
                                        <!--                                                <a class="btn btn-block btn-small btn-secondary" href="/store/checkout"-->
                                        <!--                                                   type="button" style="text-transform: none">-->
                                        <!--                                                    <- Edit Information-->
                                        <!--                                                </a>-->
                                        <!--                                            </td>-->
                                        <!--                                        </tr>-->
                                        <tr style="border: none">
                                            <td colspan="3" class="pt-1">
                                                <button class="btn btn-block btn-small btn-primary" type="submit" style="text-transform: none">
                                                    Complete Order
                                                </button>
                                            </td>
                                        </tr>

                                    </table>

                                </div>

                            </div>
                        </div>

                    </div>

            </form>


            <dialog th:fragment="order-submitting-modal" id="submitDialog" class="rounded border-0">
                <div id="loader" class="align-items-center justify-content-center text-center border-0">
                    <div id="dialogSpinner" class="spinner-border m-5 text-center text-fuscia" role="status"></div>
                    <p class="dialogText text-fuscia">Please wait.</p>
                    <p class="dialogText text-fuscia">Submitting your order...</p>
                </div>
            </dialog>


        </main>
    </div>
</div>

<script type="text/javascript" src="/js/app.js"></script>

<script>

    document.getElementById('order-form').addEventListener('submit', function (event) {
        showDialog("submitDialog");
        this.submit()
    });


    document.addEventListener('DOMContentLoaded', function () {
        // Prevent "Enter" key to submit form
        window.addEventListener('keydown', function (event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                return false;
            }
        });

        let iCase = 1;
        if(document.getElementById('billingPostalCode').value === "" && document.getElementById('billingZip').value === ""){
            iCase = 0;
        }

        updateBillingMask(iCase);

        document.getElementById('billingCountry').addEventListener('change', function () {
            updateBillingMask(0);
        });
    });

    document.getElementById('billingZip').addEventListener('input', handleZipInput);
    document.getElementById('billingPostalCode').addEventListener('input', handlePostalCodeInput);

    function updateBillingMask(iCase) {
        if (document.getElementById('billingCountry').value === 'US') {
            billingUSCase(iCase);
        } else {
            billingCACase(iCase);
        }
    }

    function formatPostalCode(postalCode) {
        const cleaned = postalCode.trim().toUpperCase();
        const match = cleaned.match(/^([A-Za-z]\d[A-Za-z])\s?(\d[A-Za-z]\d)$/);
        if (match) {
            return match[1] + ' ' + match[2];
        }
        return null;
    }

    // Function to format postal code (99999 format)
    function formatZip(postalCode) {
        const cleaned = postalCode.trim();
        const match = cleaned.match(/^\d{5}$/);
        if (match) {
            return match[0];
        }
        return null;
    }

    function handleZipInput(event) {
        const input = event.target;
        const value = input.value;
        const formattedValue = formatZip(value);
        if (formattedValue) {
            input.value = formattedValue;
        }
    }

    function handlePostalCodeInput(event) {
        const input = event.target;
        const value = input.value;
        const formattedValue = formatPostalCode(value);
        if (formattedValue) {
            input.value = formattedValue;
        }
    }

    function setPlaceHolder(id, value) {
        document.getElementById(id).value = value;
    }

    function billingUSCase(iCase) {
        switchVisibility('billing-state-us-field', 'billing-state-ca-field');
        switchVisibility('billing-zip-code-field', 'billing-postal-code-field');
        setPlaceHolder("billingPostalCode", "A1A 1A1");
        if(iCase === 0){
            setPlaceHolder("billingZip", "");
        }
    }

    function billingCACase(iCase) {
        switchVisibility('billing-state-ca-field', 'billing-state-us-field');
        switchVisibility('billing-postal-code-field', 'billing-zip-code-field');
        setPlaceHolder("billingZip", "11111");
        if(iCase === 0){
            setPlaceHolder("billingPostalCode", "");
        }
    }

    function log(text) {
        console.log(text);
    }

    function switchVisibility(elementIdToShow, elementIdToHide) {
        const elementToShow = document.getElementById(elementIdToShow);
        const elementToHide = document.getElementById(elementIdToHide);
        elementToShow.style.display = "block";
        elementToHide.style.display = "none";
    }

    function showDialog(id) {
        document.getElementById(id).showModal();
    }
</script>

</body>
</html>
